<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8">
<title>JsBelote</title>
<script src="jquery-1.11.2.js"></script>
<script src="Paquet.js"></script>
<script src="Joueur.js"></script>
<script type="text/javascript">

 var equipe1 = new Equipe(1);
 var equipe2 = new Equipe(2);

 var joueur1 = new Joueur("Simon G", equipe1);
 var joueur2 = new Joueur("Tristan", equipe2);
 var joueur3 = new Joueur("Simon C", equipe1);
 var joueur4 = new Joueur("Romain", equipe2);

 var deck = new Deck();
 deck.genererDepuisFichier("cartes.json");
 deck.melanger();

 var table = new Table(deck);
 table.joueurs.push(joueur1);
 table.joueurs.push(joueur2);
 table.joueurs.push(joueur3);
 table.joueurs.push(joueur4);

 table.distributionInitiale();
 table.retourner();

 for (var i=0; i < table.joueurs.length; i++) {
     var texte = table.joueurs[i].pseudo;
     for (var j=0; j < table.joueurs[i].main.length; j++) {
	 var carte = table.joueurs[i].main[j];
	 texte += "\n" + carte.nom + " de " + carte.couleur;
     }
     alert(texte);
 }

 alert("La carte retournée est : " + table.carte_retournee.nom + " de " + table.carte_retournee.couleur);

 for(var i=0; i < table.joueurs.length; i++) {
     var texte = table.joueurs[i].pseudo + ", prenez-vous ?";
     var reponse = confirm(texte);
     if (reponse) {
	 table.fairePrendre(table.joueurs[i]);
	 break;
     }
 }

 if (table.atout == undefined) {
     // Alors personne n'a pris au premier tour
     // Deuxième tour.
     for (var i=0; i < table.joueurs.length; i++) {
	 var choix = prompt(table.joueurs[i].pseudo + ", à quoi prenez-vous ?");
	 if (choix != "Carreau" && choix != "Trèfle" && choix != "Coeur" && choix != "Pique") {
	     // Mauvais choix
	     continue;
	 }
	 else {
	     table.fairePrendre(table.joueurs[i], true, choix);
	     break;
	 }
     }
 }

 table.distributionDeuxiemeTour();

 for (var i=0; i < table.joueurs.length; i++) {
     console.log(table.joueurs[i].pseudo);
     console.log(table.joueurs[i].main);
     console.log("======================");
 }
</script>
<style>
body {
  overflow : hidden;
}
#tapis {
  height: 100vh;
  background-image : url('tapis-de-belote.jpg');
  background-attachment:fixed;
  background-repeat:no-repeat;
  background-position:center center;
}
#haut {
  margin: auto;
  position : absolute;
  top : 0;
  left : 40%;
}
#droite {
  position : absolute;
  right : 0;
  top : 30%;
}
#gauche {
  position : absolute;
  left : 0;
  top : 30%;
}
#bas {
  position : absolute;
  bottom : 0;
  left : 40%;
}
#centre {
  position : absolute;
  bottom : 50vh;
  left : 40%;
}
.jeu-joueur{
  text-align : center;
}
.vertical {
  text-align: center;
  width:100%;
}
.horizontal {
  heigth:35%;
  width:60px;
}
.carte {
  width: 50px;
  position: relative;
}
.rotate {
  transform: rotate(90deg);
  display : block;
  margin-top: -20px;
}
.pseudo {
  text-align: center;
}


</style>
<body>
  <div id="tapis">
    <div id="haut" class="tapis-vertical">
      <div class=" jeu-joueur"></div>
    </div>
    <div id="droite">
      <div class="jeu-joueur"></div>
    </div>
    <div id="gauche">
      <div class="jeu-joueur"></div>
    </div>
    <div id="bas" class="tapis-vertical">
      <div class="jeu-joueur"></div>
    </div>
    <div id="centre" class="tapis-vertical">
      <div class="jeu-tapis"></div>
    </div>
  </div>
</body>
</html>
<script>

  $.each(  joueur1.main, function() {
    $("#haut .jeu-joueur").append("<img  class='carte' src='jeu_de_carte/png/dos_de_carte.png' alt='dos de carte' />");
    $('#haut .jeu-joueur').addClass("vertical");
  });
  $("#haut").append("<p class='pseudo'>"+joueur1.pseudo+"</p>");
  $.each(  joueur2.main, function() {
    $("#droite .jeu-joueur").append("<img   class='carte rotate' src='jeu_de_carte/png/dos_de_carte.png' alt='dos de carte' />");
    $('#droite .jeu-joueur').addClass("horizontal");
  });
  $("#droite").prepend("<p class='pseudo'>"+joueur2.pseudo+"</p>");
  $.each(  joueur3.main, function() {
    $("#gauche .jeu-joueur").append("<img  class='carte rotate' src='jeu_de_carte/png/dos_de_carte.png' alt='dos de carte' />");
    $('#gauche .jeu-joueur').addClass("horizontal");
  });
  $("#gauche").prepend("<p class='pseudo'>"+joueur3.pseudo+"</p>");
  $.each(  joueur4.main, function() {
    var name = this.nom+"_de_"+this.couleur;
    $("#bas .jeu-joueur").append("<img class='carte' src='jeu_de_carte/png/"+name+".png' alt='"+name+"' />");
    $('#bas .jeu-joueur').addClass("vertical");
  });
  $("#bas").prepend("<p class='pseudo'>"+joueur4.pseudo+"</p>");
  $('#bas .carte').mouseenter(function(){
    $(this).addClass("Selected");
    $(this).animate({
      width: "80px"
    }, 200 );

    //début de l'animation
    $(".Selected").click(function(){
      $(this).animate({
        position: 'absolute',
        bottom : '50vh'
      }, 500 ).queue(function(){
          var element = $(this);
          //changement de block
          element.detach();
          $('#centre .jeu-tapis').append(element);
          element.css('position','relative');
          element.css('bottom','0');
          //deuxième animation
          element.animate({
            width: "50px"
          }, 250 );
        });
    });
  });
  $('#bas .carte').mouseout(function(){
    $(this).animate({
      width: "50px"
    }, 200 );
    $(this).removeClass('Selected');
  });

  function ramasserPli(direction){
    alert("On rammasse!");
    $('#centre .jeu-tapis .carte').animate({
        position : "absolute"
      }, 1200 );
  }
  $("#haut").click(function(){
    ramasserPli("haut");
    });



</script>
